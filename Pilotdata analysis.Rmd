---
title: "Pilotdata analysis"
author: "Lina Elkj√¶r Pedersen"
date: "12/4/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}

data <- read_csv("dataweek1.csv")

data <-  data %>% 
  mutate(
    ...1 = NULL,
    ...2 = NULL
  )

get_prior(data = data_gaus, family = gaussian(), RT ~ 1 + gender + (1| gender:id))

m4_gaus_prior <-
  brm(data = data_gaus,
      family = gaussian(),
      RT ~ 1 + gender + (1| gender:id),
      prior =  c(prior(student_t(3, 5504, 2375), class = Intercept),
               prior(normal(0, 1000), class = b),
               prior(student_t(3, 0, 2375), class = sd),
               prior(student_t(3, 0, 2375), class= sigma)),
      cores=2,
      chains=4,
      sample_prior = "only")

pp_check(m4_gaus_prior, ndraws = 100)+
  ggtitle("M4 Prior Predictive Check")

#################

m4_gaus <-
  brm(data = data_gaus,
      family = gaussian,
      RT ~ 1 + gender + (1| gender:id),
      prior=c(prior(student_t(3, 5504, 2375), class = Intercept),
                prior(normal(0, 1000), class = b),
                prior(student_t(3, 0, 2375), class = sd),
                prior(student_t(3, 0, 2375), class= sigma)),
      cores = 2,
      chains = 4,
      iter=5000,
      sample_prior = TRUE
      #control = list(adapt_delta = 0.999, max_treedepth = 15)
      )


pp_check(m4_gaus, ndraws = 100)+
  ggtitle("M4 Posterior Predictive Check")
summary(m4_gaus)

```

